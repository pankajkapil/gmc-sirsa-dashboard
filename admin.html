<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>GMC Sirsa - Admin</title><style>* { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: Arial, sans-serif; background: #f5f5f5; color: #333; } .admin-panel { max-width: 1200px; margin: 20px auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.1); } h1, h2 { color: #333; margin-bottom: 20px; } .logout-btn { float: right; padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; } .form-group { margin-bottom: 20px; } .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; } .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; } .save-btn { padding: 12px 30px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; width: 100%; margin-top: 20px; } .save-btn:hover { background: #218838; } .status-msg { margin: 15px 0; padding: 10px; border-radius: 4px; font-weight: bold; display: none; } .status-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; } .section { background: #f9f9f9; padding: 20px; margin-bottom: 25px; border-left: 4px solid #007bff; border-radius: 4px; } #login-page { display: block; } #admin-page { display: none; } .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; } .photo-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-top: 15px; } .photo-item { border: 2px solid #ddd; padding: 15px; border-radius: 6px; background: white; } .photo-item label { font-size: 13px; color: #333; margin-bottom: 8px; display: block; font-weight: 600; } .photo-item input[type="file"] { display: block; width: 100%; padding: 8px; border: 1px solid #e0e0e0; border-radius: 4px; cursor: pointer; font-size: 12px; } .sync-indicator { margin: 10px 0; padding: 10px; background: #e7f3ff; border-left: 4px solid #2196F3; border-radius: 4px; font-size: 12px; color: #0066cc; }</style></head><body><div class="admin-panel"><div id="login-page"><h1>Admin Login</h1><div class="form-group"><label>Password:</label><input type="password" id="password" placeholder="Enter admin password"></div><button class="save-btn" onclick="login()">Login</button></div><div id="admin-page"><h1>Admin Dashboard <button class="logout-btn" onclick="logout()">Logout</button></h1><div id="status-message" class="status-msg"></div><div class="sync-indicator">âœ“ Data saves automatically | Data syncs to dashboard</div><div class="section"><h2>Project KPIs (Financial Tracking)</h2><div class="two-col"><div class="form-group"><label>Physical Progress (%):</label><input type="number" id="physicalProgress" min="0" max="100" placeholder="0-100" onchange="autoSave()"></div><div class="form-group"><label>Financial Progress (%):</label><input type="number" id="financialProgress" min="0" max="100" placeholder="0-100" onchange="autoSave()"></div></div><div class="two-col"><div class="form-group"><label>Total Project Cost (â‚¹ Crores):</label><input type="number" id="totalProjectCost" step="0.01" placeholder="e.g., 832" onchange="autoSave()"></div><div class="form-group"><label>Funds Released (â‚¹ Crores):</label><input type="number" id="totalFundsReleased" step="0.01" placeholder="e.g., 134.90" onchange="autoSave()"></div></div><div class="two-col"><div class="form-group"><label>Financial Progress Amount (â‚¹ Crores):</label><input type="number" id="financialProgressAmount" step="0.01" placeholder="e.g., 201.84" onchange="autoSave()"></div><div class="form-group"><label>Funding Gap (â‚¹ Crores):</label><input type="number" id="fundingGap" step="0.01" placeholder="e.g., 67.10" onchange="autoSave()"></div></div></div><div class="section"><h2>RAG Status</h2><div class="two-col"><div class="form-group"><label>Quality Status:</label><select id="qualityStatus" onchange="autoSave()"><option>GREEN</option><option>AMBER</option><option>RED</option></select></div><div class="form-group"><label>Timeline Status:</label><select id="timelineStatus" onchange="autoSave()"><option>GREEN</option><option>AMBER</option><option>RED</option></select></div></div><div class="two-col"><div class="form-group"><label>Cost Status:</label><select id="costStatus" onchange="autoSave()"><option>GREEN</option><option>AMBER</option><option>RED</option></select></div><div class="form-group"><label>Safety Status:</label><select id="safetyStatus" onchange="autoSave()"><option>GREEN</option><option>AMBER</option><option>RED</option></select></div></div></div><div class="section"><h2>Building Progress (12 Buildings)</h2><div id="buildingsContainer"></div></div><div class="section"><h2>Monthly Progress Photos (November 2025 - October 2026)</h2><p style="font-size: 12px; color: #666; margin-bottom: 10px;">Upload one photo for each month</p><div class="photo-grid" id="photosContainer"></div></div><button class="save-btn" onclick="saveAllData()">ðŸ’¾ Save & Sync to All Devices</button></div></div><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script><script>const ADMIN_PASSWORD = "admin123"; const SYNC_KEY = "gmcDashboardData_v2"; const buildings = ["External Development/Road", "Junior & Senior Resident", "Boys Hostel (G+8)", "Nursing Girls Hostel (G+8)", "Girls Hostel (G+6)", "Hospital Block (B+G+7)", "Service Block", "Vishram Sarai (G+2)", "Medical College (B+G+5)", "Director & MS Residence", "Paramedical Block (B+G+6)", "Common Basement"]; const months = ["November 2025", "December 2025", "January 2026", "February 2026", "March 2026", "April 2026", "May 2026", "June 2026", "July 2026", "August 2026", "September 2026", "October 2026"]; const firebaseConfig = { apiKey: "AIzaSyAhr7PG9dDjYi3i5FKfP5fhFOvQ-InjDXI", authDomain: "rudransh-kapil.firebaseapp.com", databaseURL: "https://rudransh-kapil-default-rtdb.firebaseio.com", projectId: "rudransh-kapil", storageBucket: "rudransh-kapil.firebasestorage.app", messagingSenderId: "602527729848", appId: "1:602527729848:web:c400e1ec44ff7ea622cc4d" }; let dbRef = null; try { firebase.initializeApp(firebaseConfig); dbRef = firebase.database().ref("gmcDashboardData"); } catch(e) { console.error('Firebase init error:', e); } function login() { const pwd = document.getElementById('password').value; if (pwd === ADMIN_PASSWORD) { localStorage.setItem('adminLoggedIn', 'true'); document.getElementById('login-page').style.display = 'none'; document.getElementById('admin-page').style.display = 'block'; renderBuildings(); renderPhotos(); loadData(); } else { alert('Invalid password'); } } function logout() { localStorage.removeItem('adminLoggedIn'); document.getElementById('login-page').style.display = 'block'; document.getElementById('admin-page').style.display = 'none'; document.getElementById('password').value = ''; } function renderBuildings() { const container = document.getElementById('buildingsContainer'); container.innerHTML = ''; const grid = document.createElement('div'); grid.className = 'two-col'; buildings.forEach(building => { const div = document.createElement('div'); div.className = 'form-group'; const safeId = 'building_' + building.replace(/[^a-zA-Z0-9]/g, '_'); div.innerHTML = `<label>${building} (%):</label><input type="number" id="${safeId}" min="0" max="100" placeholder="0-100" onchange="autoSave()">`; grid.appendChild(div); }); container.appendChild(grid); } function renderPhotos() { const container = document.getElementById('photosContainer'); container.innerHTML = ''; months.forEach((month, index) => { const div = document.createElement('div'); div.className = 'photo-item'; div.innerHTML = `<label>${month}</label><input type="file" id="photo_${index}" accept="image/*" onchange="handlePhotoChange(${index})">`; container.appendChild(div); }); } function handlePhotoChange(index) { const input = document.getElementById(`photo_${index}`); if (!input.files || !input.files[0]) return; const reader = new FileReader(); reader.onload = function(e) { const photos = JSON.parse(localStorage.getItem(SYNC_KEY + '_photos') || '{}'); photos[index] = e.target.result; localStorage.setItem(SYNC_KEY + '_photos', JSON.stringify(photos)); showMessage(`Photo for ${months[index]} uploaded!`); }; reader.readAsDataURL(input.files[0]); } function autoSave() { setTimeout(saveAllData, 500); } function syncToFirebase(data) { if (!dbRef) { console.warn('Firebase ref not initialized'); return Promise.resolve(); } return dbRef.set(data).then(() => { console.log('Firebase sync successful'); }).catch(err => { console.error('Firebase sync error:', err); }); } function saveAllData() { const data = { physicalProgress: parseInt(document.getElementById('physicalProgress').value) || 0, financialProgress: parseInt(document.getElementById('financialProgress').value) || 0, totalProjectCost: parseFloat(document.getElementById('totalProjectCost').value) || 0, totalFundsReleased: parseFloat(document.getElementById('totalFundsReleased').value) || 0, financialProgressAmount: parseFloat(document.getElementById('financialProgressAmount').value) || 0, fundingGap: parseFloat(document.getElementById('fundingGap').value) || 0, qualityStatus: document.getElementById('qualityStatus').value, timelineStatus: document.getElementById('timelineStatus').value, costStatus: document.getElementById('costStatus').value, safetyStatus: document.getElementById('safetyStatus').value, timestamp: new Date().toISOString(), lastUpdated: new Date().toLocaleString('en-IN') }; buildings.forEach(building => { const safeId = 'building_' + building.replace(/[^a-zA-Z0-9]/g, '_'); data['building_' + building] = parseInt(document.getElementById(safeId).value) || 0; }); localStorage.setItem(SYNC_KEY, JSON.stringify(data)); syncToFirebase(data); showMessage('âœ“ Data saved & synced to dashboard!'); } function loadData() { const stored = localStorage.getItem(SYNC_KEY); if (!stored) return; const data = JSON.parse(stored); document.getElementById('physicalProgress').value = data.physicalProgress || ''; document.getElementById('financialProgress').value = data.financialProgress || ''; document.getElementById('totalProjectCost').value = data.totalProjectCost || ''; document.getElementById('totalFundsReleased').value = data.totalFundsReleased || ''; document.getElementById('financialProgressAmount').value = data.financialProgressAmount || ''; document.getElementById('fundingGap').value = data.fundingGap || ''; document.getElementById('qualityStatus').value = data.qualityStatus || 'GREEN'; document.getElementById('timelineStatus').value = data.timelineStatus || 'GREEN'; document.getElementById('costStatus').value = data.costStatus || 'GREEN'; document.getElementById('safetyStatus').value = data.safetyStatus || 'GREEN'; buildings.forEach(building => { const safeId = 'building_' + building.replace(/[^a-zA-Z0-9]/g, '_'); const value = data['building_' + building]; if (document.getElementById(safeId)) { document.getElementById(safeId).value = value || ''; } }); } function showMessage(msg) { const el = document.getElementById('status-message'); el.textContent = msg; el.className = 'status-msg status-success'; el.style.display = 'block'; setTimeout(() => { el.style.display = 'none'; }, 3000); } window.addEventListener('load', () => { if (localStorage.getItem('adminLoggedIn') === 'true') { document.getElementById('login-page').style.display = 'none'; document.getElementById('admin-page').style.display = 'block'; renderBuildings(); renderPhotos(); loadData(); } });</script></body></html>

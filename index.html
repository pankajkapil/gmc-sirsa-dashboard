<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>GMC Sirsa - Dashboard</title><style>* { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: Arial, sans-serif; background: #f5f5f5; color: #333; } .container { max-width: 1400px; margin: 0 auto; padding: 20px; } header { background: #003d7a; color: white; padding: 30px; border-radius: 8px; margin-bottom: 30px; text-align: center; box-shadow: 0 0 20px rgba(0,0,0,0.2); } header h1 { font-size: 28px; margin-bottom: 10px; } header p { font-size: 14px; opacity: 0.9; } .kpi-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px; } .kpi-card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-top: 4px solid #007bff; } .kpi-card h3 { color: #666; font-size: 13px; text-transform: uppercase; margin-bottom: 15px; } .kpi-card .value { font-size: 36px; font-weight: bold; color: #003d7a; margin-bottom: 5px; } .kpi-card .unit { font-size: 12px; color: #999; } .section { background: white; padding: 25px; border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); } .section h2 { color: #003d7a; font-size: 20px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #007bff; display: flex; align-items: center; gap: 10px; } .rag-status { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; } .rag-item { background: #f9f9f9; padding: 15px; border-radius: 6px; border-left: 4px solid #ddd; } .rag-item h4 { color: #333; margin-bottom: 10px; font-size: 13px; } .rag-badge { display: inline-block; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; } .rag-green { background: #d4edda; color: #155724; } .rag-amber { background: #fff3cd; color: #856404; } .rag-red { background: #f8d7da; color: #721c24; } .building-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 20px; } .building-item { background: #f9f9f9; padding: 15px; border-radius: 6px; border-left: 4px solid #007bff; } .building-item h4 { color: #333; margin-bottom: 10px; font-size: 13px; font-weight: bold; } .progress-bar { background: #e0e0e0; height: 24px; border-radius: 12px; overflow: hidden; margin-bottom: 5px; } .progress-fill { background: #28a745; height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 11px; font-weight: bold; transition: width 0.3s ease; } .photo-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px; } .photo-item { background: #f0f0f0; border-radius: 6px; overflow: hidden; aspect-ratio: 1; display: flex; align-items: center; justify-content: center; position: relative; } .photo-item img { width: 100%; height: 100%; object-fit: cover; } .photo-item .month-label { position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 5px; font-size: 11px; text-align: center; } .no-photo { color: #999; font-size: 12px; font-style: italic; } .button-group { display: flex; gap: 10px; margin-top: 20px; justify-content: center; } .btn { padding: 12px 24px; border: none; border-radius: 4px; font-size: 14px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; font-weight: bold; } .btn-admin { background: #003d7a; color: white; } .btn-admin:hover { background: #002851; } .btn-github { background: #333; color: white; } .btn-github:hover { background: #111; } .last-updated { text-align: center; padding: 15px; color: #666; font-size: 12px; margin-top: 20px; border-top: 1px solid #eee; } .sync-badge { color: #0066cc; font-weight: bold; } .debug-info { background: #f0f0f0; padding: 10px; border-radius: 4px; font-size: 11px; font-family: monospace; margin-top: 10px; color: #333; max-height: 100px; overflow-y: auto; }</style></head><body><div class="container"><header><h1>üèóÔ∏è GMC Sirsa Medical College</h1><p>Project Development & Infrastructure Progress Dashboard</p></header><div class="kpi-container" id="kpiContainer"></div><div class="section"><h2>üìä RAG Status (Red-Amber-Green)</h2><div class="rag-status" id="ragStatus"></div></div><div class="section"><h2>üè¢ Building-wise Progress</h2><div class="building-grid" id="buildingGrid"></div></div><div class="section"><h2>üì∏ Monthly Progress Photos</h2><div class="photo-gallery" id="photoGallery"></div></div><div class="button-group"><a href="admin.html" class="btn btn-admin">üîß Admin Dashboard</a><a href="https://github.com/pankajkapil/gmc-sirsa-dashboard" target="_blank" class="btn btn-github">üìÅ GitHub</a></div><div class="last-updated"><span>‚úì Last Updated:</span> <span id="lastUpdatedTime">-</span> | <span class="sync-badge" id="syncStatus">üîÑ Sync Active</span></div><div class="debug-info" id="debugInfo">Debug: Loading...</div></div><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script><script>const SYNC_KEY = "gmcDashboardData_v2"; const buildings = ["External Development/Road", "Junior & Senior Resident", "Boys Hostel (G+8)", "Nursing Girls Hostel (G+8)", "Girls Hostel (G+6)", "Hospital Block (B+G+7)", "Service Block", "Vishram Sarai (G+2)", "Medical College (B+G+5)", "Director & MS Residence", "Paramedical Block (B+G+6)", "Common Basement"]; const months = ["November 2025", "December 2025", "January 2026", "February 2026", "March 2026", "April 2026", "May 2026", "June 2026", "July 2026", "August 2026", "September 2026", "October 2026"]; const firebaseConfig = { apiKey: "AIzaSyAhr7PG9dDjYi3i5FKfP5fhFOvQ-InjDXI", authDomain: "rudransh-kapil.firebaseapp.com", databaseURL: "https://rudransh-kapil-default-rtdb.firebaseio.com", projectId: "rudransh-kapil", storageBucket: "rudransh-kapil.firebasestorage.app", messagingSenderId: "602527729848", appId: "1:602527729848:web:c400e1ec44ff7ea622cc4d" }; let debugLog = []; function addDebug(msg) { debugLog.push(`[${new Date().toLocaleTimeString()}] ${msg}`); console.log(msg); const debugEl = document.getElementById('debugInfo'); if (debugEl && debugLog.length > 0) { debugEl.innerHTML = debugLog.slice(-10).join('<br>'); } } try { firebase.initializeApp(firebaseConfig); addDebug('Firebase initialized'); } catch (e) { addDebug('Firebase error: ' + e.message); } const db = firebase.database(); const dbRef = db.ref("gmcDashboardData"); let dataSourceUsed = 'none'; function setupFirebaseListener() { addDebug('Setting up Firebase listener...'); dbRef.on('value', (snapshot) => { const data = snapshot.val(); addDebug('Firebase data received: ' + (data ? 'YES' : 'NO')); if (data) { dataSourceUsed = 'Firebase'; localStorage.setItem(SYNC_KEY, JSON.stringify(data)); displayDashboard(); } else { dataSourceUsed = 'localStorage'; addDebug('Firebase empty, using localStorage data'); displayDashboard(); } }, (error) => { dataSourceUsed = 'localStorage (Firebase error)'; addDebug('Firebase ERROR: ' + error.code + ' - ' + error.message); displayDashboard(); }); } function displayDashboard() { addDebug('Displaying dashboard from ' + dataSourceUsed); const stored = localStorage.getItem(SYNC_KEY); const data = stored ? JSON.parse(stored) : {}; displayKPIs(data); displayRAG(data); displayBuildings(data); displayPhotos(); updateTimestamp(data); addDebug('Dashboard updated'); } function displayKPIs(data) { const container = document.getElementById('kpiContainer'); container.innerHTML = ''; const kpis = [{name: 'PHYSICAL PROGRESS', value: data.physicalProgress || 0, unit: '%'}, {name: 'FINANCIAL PROGRESS', value: data.financialProgress || 0, unit: '%'}, {name: 'TOTAL PROJECT COST', value: (data.totalProjectCost || 0).toFixed(2), unit: '‚Çπ Crores'}, {name: 'FUNDS RELEASED', value: (data.totalFundsReleased || 0).toFixed(2), unit: '‚Çπ Crores'}]; kpis.forEach(kpi => { const card = document.createElement('div'); card.className = 'kpi-card'; card.innerHTML = `<h3>${kpi.name}</h3><div class="value">${kpi.value}</div><div class="unit">${kpi.unit}</div>`; container.appendChild(card); }); } function displayRAG(data) { const container = document.getElementById('ragStatus'); container.innerHTML = ''; const ragItems = [{label: 'Quality Status', value: data.qualityStatus || 'GREEN'}, {label: 'Timeline Status', value: data.timelineStatus || 'GREEN'}, {label: 'Cost Status', value: data.costStatus || 'GREEN'}, {label: 'Safety Status', value: data.safetyStatus || 'GREEN'}]; ragItems.forEach(item => { const div = document.createElement('div'); div.className = 'rag-item'; const badgeClass = 'rag-badge rag-' + item.value.toLowerCase(); div.innerHTML = `<h4>${item.label}</h4><span class="${badgeClass}">${item.value}</span>`; container.appendChild(div); }); } function displayBuildings(data) { const container = document.getElementById('buildingGrid'); container.innerHTML = ''; buildings.forEach(building => { const value = data['building_' + building] || 0; const div = document.createElement('div'); div.className = 'building-item'; div.innerHTML = `<h4>${building}</h4><div class="progress-bar"><div class="progress-fill" style="width: ${value}%">${value}%</div></div>`; container.appendChild(div); }); } function displayPhotos() { const photoContainer = document.getElementById('photoGallery'); photoContainer.innerHTML = ''; const photos = JSON.parse(localStorage.getItem(SYNC_KEY + '_photos') || '{}'); months.forEach((month, index) => { const div = document.createElement('div'); div.className = 'photo-item'; if (photos[index]) { div.innerHTML = `<img src="${photos[index]}" alt="${month}"><div class="month-label">${month}</div>`; } else { div.innerHTML = `<div class="no-photo"><div>${month}</div><div style="font-size: 10px; margin-top: 5px;">No photo</div></div>`; } photoContainer.appendChild(div); }); } function updateTimestamp(data) { if (data.lastUpdated) { document.getElementById('lastUpdatedTime').textContent = data.lastUpdated; } } window.addEventListener('load', () => { addDebug('Page loaded'); setupFirebaseListener(); }); document.addEventListener('visibilitychange', () => { if (!document.hidden) { addDebug('Page became visible, checking for updates...'); dbRef.once('value').then(snapshot => { const data = snapshot.val(); if (data) { localStorage.setItem(SYNC_KEY, JSON.stringify(data)); addDebug('Updated from Firebase on visibility change'); } displayDashboard(); }).catch(e => { addDebug('Visibility update error: ' + e.message); displayDashboard(); }); } });</script></body></html>
